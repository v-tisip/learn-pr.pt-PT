<span data-ttu-id="4562c-101">Vimos como criar estimativas de custo para ambientes que gostaria de criar, percorremos algumas ferramentas para obter detalhes sobre onde estamos a gastar dinheiro e previmos despesas futuras.</span><span class="sxs-lookup"><span data-stu-id="4562c-101">We have seen how to create cost estimates for environments you'd like to build, walked through some tools to get details on where we're spending money, and projected future expenses.</span></span> <span data-ttu-id="4562c-102">O nosso próximo desafio é ver como pode reduzir os custos de infraestrutura.</span><span class="sxs-lookup"><span data-stu-id="4562c-102">Our next challenge is to look at how to reduce those infrastructure costs.</span></span>

## <a name="use-reserved-instances"></a><span data-ttu-id="4562c-103">Utilizar instâncias reservadas</span><span class="sxs-lookup"><span data-stu-id="4562c-103">Use reserved instances</span></span>

<span data-ttu-id="4562c-104">Se tiver cargas de trabalho de VM que são estáticas e previsíveis por natureza, especialmente as que são executadas 24x7x365, através de instâncias reservadas é uma forma fantástica de poupar potencialmente até 70 por cento, dependendo do tamanho da VM.</span><span class="sxs-lookup"><span data-stu-id="4562c-104">If you have VM workloads that are static and predictable in nature, particularly ones that run 24x7x365, using reserved instances is a fantastic way to potentially save up to 70 percent, depending on the VM size.</span></span>

![Poupanças de instância reservada](../images/savings-coins.png)

<span data-ttu-id="4562c-106">As instâncias reservadas são compradas em prazos de um ou três anos, com pagamento exigido para o prazo total antecipado.</span><span class="sxs-lookup"><span data-stu-id="4562c-106">Reserved instances are purchased in one-year or three-year terms, with payment required for the full term up front.</span></span> <span data-ttu-id="4562c-107">Após a compra, a Microsoft corresponde a reserva com as instâncias em execução e diminui as horas da sua reserva.</span><span class="sxs-lookup"><span data-stu-id="4562c-107">After it's purchased, Microsoft matches up the reservation to running instances and decrements the hours from your reservation.</span></span> <span data-ttu-id="4562c-108">As reservas podem ser compradas através do portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="4562c-108">Reservations can be purchased through the Azure portal.</span></span> <span data-ttu-id="4562c-109">E como as instâncias reservadas são um desconto de computação, estão disponíveis para VMs do Linux e Windows.</span><span class="sxs-lookup"><span data-stu-id="4562c-109">And because reserved instances are a compute discount, they are available for both Windows and Linux VMs.</span></span>

## <a name="right-size-underutilized-virtual-machines"></a><span data-ttu-id="4562c-110">Dimensionamento correto de máquinas virtuais subutilizadas</span><span class="sxs-lookup"><span data-stu-id="4562c-110">Right-size underutilized virtual machines</span></span>

<span data-ttu-id="4562c-111">Lembre-se da nossa discussão anterior de que o Azure Cost Management e o Assistente do Azure podem recomendar o dimensionamento correto ou o encerramento das VMs.</span><span class="sxs-lookup"><span data-stu-id="4562c-111">Recall from our previous discussion that Azure Cost Management and Azure Advisor might recommend right-sizing or shutting down VMs.</span></span> <span data-ttu-id="4562c-112">Dimensionar corretamente uma máquina virtual é o processo de redimensioná-la para um tamanho adequado.</span><span class="sxs-lookup"><span data-stu-id="4562c-112">Right-sizing a virtual machine is the process of resizing it to a proper size.</span></span> <span data-ttu-id="4562c-113">Vamos imaginar que tem um servidor em execução como um controlador de domínio que está dimensionado como uma **Standard_D4sv3**, mas a VM encontra-se 90 por cento inativa na maior parte do tempo.</span><span class="sxs-lookup"><span data-stu-id="4562c-113">Let's imagine you have a server running as a domain controller that is sized as a **Standard_D4sv3**, but your VM is sitting at 90 percent idle the vast majority of the time.</span></span> <span data-ttu-id="4562c-114">Ao redimensionar esta VM para uma **Standard_D2s_v3**, reduz o custo de computação em 50 por cento.</span><span class="sxs-lookup"><span data-stu-id="4562c-114">By resizing this VM to a **Standard_D2s_v3**, you reduce your compute cost by 50 percent.</span></span> <span data-ttu-id="4562c-115">Os custos são lineares e duplos para cada tamanho maior na mesma série.</span><span class="sxs-lookup"><span data-stu-id="4562c-115">Costs are linear and double for each size larger in the same series.</span></span> <span data-ttu-id="4562c-116">Neste caso, até pode beneficiar da alteração da série de instância para ir para uma série de VM mais barata.</span><span class="sxs-lookup"><span data-stu-id="4562c-116">In this case, you might even benefit from changing the instance series to go to a less expensive VM series.</span></span>

![Redimensionar VM](../images/vm-resize.png)

<span data-ttu-id="4562c-118">Demasiadas máquinas virtuais grandes são uma despesa desnecessária comum no Azure e algo que pode ser facilmente resolvido.</span><span class="sxs-lookup"><span data-stu-id="4562c-118">Oversized virtual machines are a common unnecessary expense on Azure and one that is easily fixed.</span></span> <span data-ttu-id="4562c-119">Pode alterar o tamanho de uma VM no portal do Azure, no Azure PowerShell ou na CLI do Azure.</span><span class="sxs-lookup"><span data-stu-id="4562c-119">You can change the size of a VM through the Azure portal, Azure PowerShell, or the Azure CLI.</span></span>

> [!NOTE]
> <span data-ttu-id="4562c-120">Redimensionar uma VM exige que tenha de ser parada, redimensionada e, em seguida, reiniciada.</span><span class="sxs-lookup"><span data-stu-id="4562c-120">Resizing a VM requires that it be stopped, resized, and then restarted.</span></span> <span data-ttu-id="4562c-121">Esta ação pode demorar alguns minutos, dependendo da importância da alteração de tamanho.</span><span class="sxs-lookup"><span data-stu-id="4562c-121">This may take a few minutes depending on how significant the size change is.</span></span> <span data-ttu-id="4562c-122">Planeie uma falha ou mude o tráfego para outra instância enquanto executa esta tarefa.</span><span class="sxs-lookup"><span data-stu-id="4562c-122">Plan for an outage, or shift your traffic to another instance while you perform this task.</span></span>

## <a name="deallocate-virtual-machines-in-off-hours"></a><span data-ttu-id="4562c-123">Desaloque máquinas virtuais em horários sem atividade</span><span class="sxs-lookup"><span data-stu-id="4562c-123">Deallocate virtual machines in off hours</span></span>

<span data-ttu-id="4562c-124">Se tiver cargas de trabalho de máquina virtual que só são utilizadas durante determinados períodos de tempo, mas estiver a executá-las a tempo inteiro todos os dias, está a perder dinheiro.</span><span class="sxs-lookup"><span data-stu-id="4562c-124">If you have virtual machine workloads that are only used during certain periods of time, but you're running them every hour of every day, you're wasting money.</span></span> <span data-ttu-id="4562c-125">Estas VMs são excelentes candidatas para serem encerradas quando não estiverem em utilização e iniciarem a cópia de segurança com base numa agenda, economizando os custos de computação, enquanto a VM é desalocada.</span><span class="sxs-lookup"><span data-stu-id="4562c-125">These VMs are great candidates to shut down when not in use and start back up on a schedule, saving you compute costs while the VM is deallocated.</span></span>

<span data-ttu-id="4562c-126">Esta abordagem é uma excelente estratégia para ambientes de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="4562c-126">This approach is a great strategy for development environments.</span></span> <span data-ttu-id="4562c-127">Muitas vezes, o desenvolvimento pode ocorrer apenas durante o horário comercial, dando-lhe flexibilidade para desalocar estes sistemas nas horas sem atividade e impedir que os custos de computação acumulem.</span><span class="sxs-lookup"><span data-stu-id="4562c-127">It's often the case that development may happen only during business hours, giving you the flexibility to deallocate these systems in the off hours and stopping your compute costs from accruing.</span></span> <span data-ttu-id="4562c-128">O Azure tem agora uma [solução de automatização](https://docs.microsoft.com/azure/automation/automation-solution-vm-management) totalmente disponível para tirar partido do seu ambiente.</span><span class="sxs-lookup"><span data-stu-id="4562c-128">Azure now has an [automation solution](https://docs.microsoft.com/azure/automation/automation-solution-vm-management) fully available for you to leverage in your environment.</span></span>

<span data-ttu-id="4562c-129">Também pode utilizar a funcionalidade de encerramento automático numa máquina virtual para agendar encerramentos automatizados.</span><span class="sxs-lookup"><span data-stu-id="4562c-129">You can also use the auto-shutdown feature on a virtual machine to schedule automated shutdowns.</span></span>

![Encerramento automatizado](../images/vm-auto-shutdown.png)

## <a name="delete-unused-virtual-machines"></a><span data-ttu-id="4562c-131">Eliminar máquinas virtuais não utilizadas</span><span class="sxs-lookup"><span data-stu-id="4562c-131">Delete unused virtual machines</span></span> 

 <span data-ttu-id="4562c-132">Este conselho pode parecer óbvio, mas se não estiver a utilizar um serviço, deve encerrá-lo.</span><span class="sxs-lookup"><span data-stu-id="4562c-132">This advice may sound obvious, but if you aren't using a service, you should shut it down.</span></span> <span data-ttu-id="4562c-133">Não é raro encontrar sistemas que não produzem ou sistemas de prova de conceito deixados em torno de um projeto que já não é preciso.</span><span class="sxs-lookup"><span data-stu-id="4562c-133">It's not uncommon to find non-production or proof-of-concept systems left around following a project that is no longer needed.</span></span> <span data-ttu-id="4562c-134">Reveja regularmente o seu ambiente e trabalhe para identificar estes sistemas.</span><span class="sxs-lookup"><span data-stu-id="4562c-134">Regularly review your environment and work to identify these systems.</span></span> <span data-ttu-id="4562c-135">Encerrar estes sistemas pode oferecer um benefício multifacetado ao fazer com que economize não só em custos de infraestrutura, mas também potencialmente em licenciamento e operações.</span><span class="sxs-lookup"><span data-stu-id="4562c-135">Shutting down these systems can have a multifaceted benefit by saving you not only on infrastructure costs but also potential savings on licensing and operations.</span></span>

## <a name="migrate-to-paas-or-saas-services"></a><span data-ttu-id="4562c-136">Migrar para os serviços PaaS ou SaaS</span><span class="sxs-lookup"><span data-stu-id="4562c-136">Migrate to PaaS or SaaS services</span></span> 

<span data-ttu-id="4562c-137">Por último, uma vez que move cargas de trabalho para a cloud, uma evolução natural é começar com os serviços de infraestrutura como serviço (IaaS) e, em seguida, movê-los para a plataforma como serviço (PaaS) conforme apropriado, num processo iterativo.</span><span class="sxs-lookup"><span data-stu-id="4562c-137">Lastly, as you move workloads to the cloud, a natural evolution is to start with infrastructure-as-a-service (IaaS) services and then move them to platform-as-a-service (PaaS) as appropriate, in an iterative process.</span></span>

<span data-ttu-id="4562c-138">Os serviços de PaaS oferecem, normalmente, poupanças substanciais nos custos de recursos e operacionais.</span><span class="sxs-lookup"><span data-stu-id="4562c-138">PaaS services typically provide substantial savings in both resource and operational costs.</span></span> <span data-ttu-id="4562c-139">O desafio é que dependendo do tipo de serviço, serão precisos diferentes níveis de esforço para mover para estes serviços, de uma perspetiva de tempo e recursos.</span><span class="sxs-lookup"><span data-stu-id="4562c-139">The challenge is that depending on the type of service, varying levels of effort will be required to move to these services from both a time and resource perspective.</span></span> <span data-ttu-id="4562c-140">Poderá mover facilmente uma base de dados do SQL Server para a Base de Dados SQL do Azure, mas poderá exigir um esforço substancialmente maior para mover a sua aplicação de várias camadas para um contentor ou arquitetura sem servidor.</span><span class="sxs-lookup"><span data-stu-id="4562c-140">You might be able to easily move a SQL Server database to Azure SQL Database, but it might take substantially more effort to move your multitier application to a container or serverless-based architecture.</span></span> <span data-ttu-id="4562c-141">É uma boa prática avaliar continuamente a arquitetura das suas aplicações para determinar se existem ganhos de eficiência através dos serviços de PaaS.</span><span class="sxs-lookup"><span data-stu-id="4562c-141">It's a good practice to continuously evaluate the architecture of your applications to determine if there are efficiencies to be gained through PaaS services.</span></span>  

<span data-ttu-id="4562c-142">O Azure facilita o teste destes serviços com pouco risco, ao oferecer a possibilidade de experimentar novos padrões de arquitetura relativamente simples.</span><span class="sxs-lookup"><span data-stu-id="4562c-142">Azure makes it easy to test these services with little risk, giving you the ability to try out new architecture patterns relatively easily.</span></span> <span data-ttu-id="4562c-143">Dito isto, é normalmente uma jornada mais longa e poderá não ser de ajuda imediata, se estiver à procura de ganhos rápidos de uma perspetiva de economia de custos.</span><span class="sxs-lookup"><span data-stu-id="4562c-143">That said, it's typically a longer journey and might not be of immediate help if you're looking for quick wins from a cost-savings perspective.</span></span> <span data-ttu-id="4562c-144">O Centro de Arquitetura do Azure é um ótimo lugar para ganhar ideias para transformar a sua aplicação, bem como as melhores práticas numa vasta gama de arquiteturas e serviços do Azure.</span><span class="sxs-lookup"><span data-stu-id="4562c-144">The Azure Architecture Center is a great place to get ideas for transforming your application, as well as best practices across a wide array of architectures and Azure services.</span></span> 