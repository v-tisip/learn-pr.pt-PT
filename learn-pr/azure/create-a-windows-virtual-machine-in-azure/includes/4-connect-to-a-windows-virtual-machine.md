<span data-ttu-id="94911-101">Como administrador de rede numa empresa de análise de dados, é responsável por ligar às máquinas virtuais no Azure e por verificar que estão corretamente configuradas.</span><span class="sxs-lookup"><span data-stu-id="94911-101">As a network administrator at a data analysis company, you're responsible for connecting to virtual machines in Azure and checking that they're properly configured.</span></span> <span data-ttu-id="94911-102">Efetua este procedimento através de um cliente do Protocolo do Ambiente de Trabalho Remoto para ligar à IU de ambiente de trabalho do Windows da VM.</span><span class="sxs-lookup"><span data-stu-id="94911-102">You do that using a Remote Desktop Protocol client to connect to the VM's Windows desktop UI.</span></span>

## <a name="what-is-the-remote-desktop-protocol"></a><span data-ttu-id="94911-103">O que é o Protocolo do Ambiente de Trabalho Remoto?</span><span class="sxs-lookup"><span data-stu-id="94911-103">What is the Remote Desktop Protocol?</span></span>

<span data-ttu-id="94911-104">O Protocolo do Ambiente de Trabalho Remoto (RDP) fornece conectividade remota à IU dos computadores baseados no Windows.</span><span class="sxs-lookup"><span data-stu-id="94911-104">Remote Desktop Protocol (RDP) provides remote connectivity to the UI of Windows-based computers.</span></span> <span data-ttu-id="94911-105">O RDP permite-lhe iniciar sessão num computador Windows físico ou virtual remoto e controlá-lo como se estivesse sentado na consola.</span><span class="sxs-lookup"><span data-stu-id="94911-105">RDP enables you to sign in to a remote physical or virtual Windows computer and control that computer as if you were seated at the console.</span></span>

> [!Note]
> <span data-ttu-id="94911-106">O Windows Hyper-V no Windows Server 2016 e Windows 10 utiliza o RDP para ligar às máquinas virtuais em execução no hipervisor.</span><span class="sxs-lookup"><span data-stu-id="94911-106">Windows Hyper-V in Windows Server 2016 and Windows 10 uses RDP to connect to virtual machines running on the hypervisor.</span></span>

<span data-ttu-id="94911-107">Uma ligação RDP permite-lhe realizar a grande maioria das operações que pode fazer a partir da consola de um computador físico, à exceção de algumas funções relacionadas com energia e hardware.</span><span class="sxs-lookup"><span data-stu-id="94911-107">An RDP connection enables you to carry out the vast majority of operations that you can do from the console of a physical computer, with the exception of some power and hardware-related functions.</span></span>

<span data-ttu-id="94911-108">Uma ligação RDP requer um cliente RDP.</span><span class="sxs-lookup"><span data-stu-id="94911-108">An RDP connection requires an RDP client.</span></span> <span data-ttu-id="94911-109">A Microsoft fornece clientes RDP para os seguintes sistemas operativos:</span><span class="sxs-lookup"><span data-stu-id="94911-109">Microsoft provides RDP clients for the following operating systems:</span></span>

* <span data-ttu-id="94911-110">Windows</span><span class="sxs-lookup"><span data-stu-id="94911-110">Windows</span></span>
* <span data-ttu-id="94911-111">iOS</span><span class="sxs-lookup"><span data-stu-id="94911-111">iOS</span></span>
* <span data-ttu-id="94911-112">MacOS</span><span class="sxs-lookup"><span data-stu-id="94911-112">MacOS</span></span>
* <span data-ttu-id="94911-113">Android</span><span class="sxs-lookup"><span data-stu-id="94911-113">Android</span></span>

<span data-ttu-id="94911-114">Também existem clientes Linux de código-fonte aberto, como o Remmina, que lhe permitem ligar a um PC Windows a partir de uma distribuição do Ubuntu.</span><span class="sxs-lookup"><span data-stu-id="94911-114">There are also open-source Linux clients, such as Remmina that enable you to connect to a Windows PC from an Ubuntu distribution.</span></span>

<span data-ttu-id="94911-115">O Windows 10 inclui um cliente RDP.</span><span class="sxs-lookup"><span data-stu-id="94911-115">Windows 10 includes an RDP client.</span></span>

![Cliente RDP do Windows](../images/2-rdp-client.PNG)

## <a name="what-functionality-does-an-rdp-connection-support"></a><span data-ttu-id="94911-117">Qual a funcionalidade suportada por uma ligação RDP?</span><span class="sxs-lookup"><span data-stu-id="94911-117">What functionality does an RDP connection support?</span></span>

<span data-ttu-id="94911-118">Com uma ligação RDP, pode interagir com a IU.</span><span class="sxs-lookup"><span data-stu-id="94911-118">With an RDP connection, you can interact with the UI.</span></span> <span data-ttu-id="94911-119">No entanto, também pode ligar a outros serviços no computador remoto.</span><span class="sxs-lookup"><span data-stu-id="94911-119">However, you can also connect to other services on the remote computer.</span></span> <span data-ttu-id="94911-120">Estes serviços incluem:</span><span class="sxs-lookup"><span data-stu-id="94911-120">These services include:</span></span>

* <span data-ttu-id="94911-121">Ligações de impressoras que permitem ao computador remoto imprimir no seu dispositivo de impressão local.</span><span class="sxs-lookup"><span data-stu-id="94911-121">Printer connections that enable the remote computer to print to your local print device.</span></span>
* <span data-ttu-id="94911-122">Reprodução de áudio, em que o áudio pode ser reproduzido no computador local ou no dispositivo remoto.</span><span class="sxs-lookup"><span data-stu-id="94911-122">Audio playback, where audio can play either on the local computer or on the remote device.</span></span>
* <span data-ttu-id="94911-123">Gravação de áudio, em que pode gravar áudio a partir do computador local e direcionar esse som para o dispositivo remoto.</span><span class="sxs-lookup"><span data-stu-id="94911-123">Audio recording, where you can record audio from the local computer and direct that sound to the remote device.</span></span>
* <span data-ttu-id="94911-124">Portas, que pode redirecionar para as portas no computador local.</span><span class="sxs-lookup"><span data-stu-id="94911-124">Ports, which you can redirect to the ports on the local computer.</span></span>
* <span data-ttu-id="94911-125">Unidades, incluindo unidades de rede mapeadas, em que as unidades aparecem como ligadas ao computador remoto.</span><span class="sxs-lookup"><span data-stu-id="94911-125">Drives, including mapped network drives, where the drives will appear as connected to the remote computer.</span></span>
* <span data-ttu-id="94911-126">Dispositivos de captura de vídeo, como câmaras Web integradas.</span><span class="sxs-lookup"><span data-stu-id="94911-126">Video capture devices, such as integrated web cams.</span></span>
* <span data-ttu-id="94911-127">Outros dispositivos plug-and-play suportados.</span><span class="sxs-lookup"><span data-stu-id="94911-127">Other supported plug and play devices.</span></span>

<span data-ttu-id="94911-128">Nem todas estas funcionalidades são suportadas no Azure, uma vez que existem restrições relativamente aos ativos físicos que estão disponíveis nessa plataforma.</span><span class="sxs-lookup"><span data-stu-id="94911-128">Not all of these features are supported in Azure, as there are restrictions on what physical assets are available on that platform.</span></span> <span data-ttu-id="94911-129">Por exemplo, apenas impressoras de software podem ser redirecionadas através de uma ligação RDP a partir de uma VM alojada no Azure para os dispositivos de impressão do cliente.</span><span class="sxs-lookup"><span data-stu-id="94911-129">For example, only software printers can be redirected across an RDP connection from an Azure-hosted VM to the connecting client's print devices.</span></span>

## <a name="configure-network-settings-for-rdp-access-to-virtual-machines"></a><span data-ttu-id="94911-130">Configurar definições de rede para acesso RDP a máquinas virtuais</span><span class="sxs-lookup"><span data-stu-id="94911-130">Configure network settings for RDP access to virtual machines</span></span>

<span data-ttu-id="94911-131">Podem ser efetuadas ligações às VMs do Azure de três formas:</span><span class="sxs-lookup"><span data-stu-id="94911-131">Connections to Azure VMs can be made in three ways:</span></span>

1. <span data-ttu-id="94911-132">Diretamente ao endereço IP público da VM.</span><span class="sxs-lookup"><span data-stu-id="94911-132">Directly to the public IP address of the VM.</span></span>
2. <span data-ttu-id="94911-133">Através de uma ligação de rede privada virtual (VPN).</span><span class="sxs-lookup"><span data-stu-id="94911-133">Through a virtual private network (VPN) connection.</span></span>
3. <span data-ttu-id="94911-134">Através de uma ligação ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="94911-134">Through an ExpressRoute connection.</span></span>

<span data-ttu-id="94911-135">Um endereço IP público pode ser atribuído permanentemente ou dinâmico.</span><span class="sxs-lookup"><span data-stu-id="94911-135">A public IP address can be either permanently allocated or dynamic.</span></span> <span data-ttu-id="94911-136">Também tem de garantir que tem acesso ao endereço público da VM na porta 3389 (RDP).</span><span class="sxs-lookup"><span data-stu-id="94911-136">You also need to ensure that you have access to the VM's public address on port 3389 (RDP).</span></span> <span data-ttu-id="94911-137">Esta disposição pode exigir negociação com a equipa que está a gerir a segurança da firewall da sua organização, como configurar uma regra para o endereço IP público da VM na porta 3389.</span><span class="sxs-lookup"><span data-stu-id="94911-137">This provision may require negotiation with the team that's managing your organization's firewall security, setting up a rule to your VM's public IP address on port 3389.</span></span>

<span data-ttu-id="94911-138">Os endereços IP públicos dinâmicos são reatribuídos sempre que a VM for reiniciada.</span><span class="sxs-lookup"><span data-stu-id="94911-138">Dynamic public IP addresses are reallocated every time the VM restarts.</span></span> <span data-ttu-id="94911-139">Os endereços estáticos são persistentes, mas têm um custo superior.</span><span class="sxs-lookup"><span data-stu-id="94911-139">Static addresses are persistent, but cost more.</span></span>

<span data-ttu-id="94911-140">Para ligar através de uma VPN, a rede local tem de ter uma ligação de VPN ativa ao Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="94911-140">To connect through a VPN, your local network must have an active VPN connection to Microsoft Azure.</span></span>

<span data-ttu-id="94911-141">A abordagem de ligação ExpressRoute gere a conectividade à VM.</span><span class="sxs-lookup"><span data-stu-id="94911-141">The ExpressRoute link approach manages connectivity to the VM.</span></span> <span data-ttu-id="94911-142">Esta abordagem também fornece a latência mais baixa e a ligação de largura de banda mais alta.</span><span class="sxs-lookup"><span data-stu-id="94911-142">This approach also provides the lowest latency and highest bandwidth connection.</span></span>

> [!Note]
> <span data-ttu-id="94911-143">Independentemente da opção que utilizar para ligar ao Azure, tem de garantir que a máquina virtual é acessível por RDP, normalmente na porta 3389 predefinida.</span><span class="sxs-lookup"><span data-stu-id="94911-143">Regardless of which option you use to connect to Azure, you need to ensure the virtual machine is accessible over RDP, typically on the default port 3389.</span></span> <span data-ttu-id="94911-144">Pode configurar a VM para que possa ser acedida apenas a partir do seu próprio endereço IP cliente.</span><span class="sxs-lookup"><span data-stu-id="94911-144">You can configure the VM so it can be accessed only from your own client IP address.</span></span> <span data-ttu-id="94911-145">Ligar a uma VM através da porta 3389 num endereço IP público só é recomendado para ambientes de teste.</span><span class="sxs-lookup"><span data-stu-id="94911-145">Connecting to a VM over port 3389 on a public IP address is only recommended for test environments.</span></span> <span data-ttu-id="94911-146">Em ambientes de produção, utilize a opção 2 ou 3.</span><span class="sxs-lookup"><span data-stu-id="94911-146">In production environments, use option 2 or 3.</span></span>

## <a name="how-do-you-connect-to-a-vm-in-azure-using-rdp"></a><span data-ttu-id="94911-147">Como ligar a uma VM no Azure através de RDP?</span><span class="sxs-lookup"><span data-stu-id="94911-147">How do you connect to a VM in Azure using RDP?</span></span>

<span data-ttu-id="94911-148">Ligar a uma VM no Azure por RDP é um processo simples.</span><span class="sxs-lookup"><span data-stu-id="94911-148">Connecting to a VM in Azure using RDP is a simple process.</span></span> <span data-ttu-id="94911-149">No portal do Azure, aceda às propriedades da VM e, na parte superior, clique em **Ligar**.</span><span class="sxs-lookup"><span data-stu-id="94911-149">In the Azure portal, you go to the properties of your VM, and at the top, click **Connect**.</span></span> <span data-ttu-id="94911-150">Esta ação transfere um ficheiro .RDP pré-configurado que o Windows abre em seguida no cliente RDP.</span><span class="sxs-lookup"><span data-stu-id="94911-150">This action downloads a preconfigured .RDP file that Windows then opens in the RDP client.</span></span> <span data-ttu-id="94911-151">Pode optar por ligar através do endereço IP público da VM no ficheiro RDP.</span><span class="sxs-lookup"><span data-stu-id="94911-151">You can choose to connect over the public IP address of the VM in the RDP file.</span></span> <span data-ttu-id="94911-152">Em alternativa, se estiver a ligar através de VPN ou ExpressRoute, pode selecionar o endereço IP interno.</span><span class="sxs-lookup"><span data-stu-id="94911-152">Alternatively, if you're connecting over VPN or ExpressRoute, you can select the internal IP address.</span></span> <span data-ttu-id="94911-153">Também pode selecionar o número de porta para a ligação.</span><span class="sxs-lookup"><span data-stu-id="94911-153">You can also select the port number for the connection.</span></span>

<span data-ttu-id="94911-154">Se estiver a utilizar um endereço IP público estático para a VM, pode guardar o ficheiro .RDP no ambiente de trabalho.</span><span class="sxs-lookup"><span data-stu-id="94911-154">If you're using a static public IP address for the VM, you can save the .RDP file to your desktop.</span></span> <span data-ttu-id="94911-155">Se estiver a utilizar um endereço IP dinâmico, o ficheiro .RDP apenas permanece válido enquanto a VM estiver em execução.</span><span class="sxs-lookup"><span data-stu-id="94911-155">If you're using dynamic IP addressing, the .RDP file only remains valid while the VM is running.</span></span> <span data-ttu-id="94911-156">Se parar e reiniciar a VM, tem de transferir outro ficheiro .RDP.</span><span class="sxs-lookup"><span data-stu-id="94911-156">If you stop and restart the VM, you must download another .RDP file.</span></span>

> [!Note]
> <span data-ttu-id="94911-157">Também pode introduzir o endereço IP público da VM no cliente RDP do Windows e clicar em **Ligar**.</span><span class="sxs-lookup"><span data-stu-id="94911-157">You can also enter the public IP address of the VM into the Windows RDP client and click **Connect**.</span></span>

<span data-ttu-id="94911-158">Quando ligar, normalmente receberá dois avisos.</span><span class="sxs-lookup"><span data-stu-id="94911-158">When you connect, you will typically receive two warnings.</span></span> <span data-ttu-id="94911-159">Nomeadamente:</span><span class="sxs-lookup"><span data-stu-id="94911-159">These are:</span></span>

* <span data-ttu-id="94911-160">Aviso do publicador: causado pelo ficheiro .RDP não estar assinado publicamente.</span><span class="sxs-lookup"><span data-stu-id="94911-160">Publisher warning - caused by the .RDP file not being publicly signed.</span></span>
* <span data-ttu-id="94911-161">Aviso do certificado: causado pelo certificado do computador não ser fidedigno.</span><span class="sxs-lookup"><span data-stu-id="94911-161">Certificate warning - caused by the machine certificate not being trusted.</span></span>

<span data-ttu-id="94911-162">Em ambientes de teste, estes avisos podem ser ignorados.</span><span class="sxs-lookup"><span data-stu-id="94911-162">In test environments, these warnings can be ignored.</span></span> <span data-ttu-id="94911-163">Em ambientes de produção, o ficheiro .RDP pode ser assinado através do ficheiro RDPSIGN.EXE e do certificado do computador colocado no arquivo de **Autoridades de Certificação de Raiz Fidedigna** do cliente.</span><span class="sxs-lookup"><span data-stu-id="94911-163">In production environments, the .RDP file could be signed using RDPSIGN.EXE and the machine certificate placed in the client's **Trusted Root Certification Authorities** store.</span></span>

## <a name="summary"></a><span data-ttu-id="94911-164">Resumo</span><span class="sxs-lookup"><span data-stu-id="94911-164">Summary</span></span>

<span data-ttu-id="94911-165">Agora, pode ligar a uma VM do Windows por RDP.</span><span class="sxs-lookup"><span data-stu-id="94911-165">Now you can connect to a Windows VM by using RDP.</span></span> <span data-ttu-id="94911-166">No exercício seguinte, irá utilizar o RDP para ligar a uma VM e, em seguida, instalar uma função de servidor nesse computador.</span><span class="sxs-lookup"><span data-stu-id="94911-166">In the following exercise, you will use RDP to connect to a VM, then install a server role on that computer.</span></span>
